<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • annex</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Changelog"><meta property="og:image" content="https://some.example-url.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">annex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2-14</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/config.html">Config files/objects</a></li>
    <li><a class="dropdown-item" href="../articles/from_xlsx.html">Prepare data from XLSX</a></li>
    <li><a class="dropdown-item" href="../articles/from_textfiles.html">Prepare data from textfiles</a></li>
    <li><a class="dropdown-item" href="../articles/prepare_xtra.html">Prepare with time zones &amp; units</a></li>
    <li><a class="dropdown-item" href="../articles/calculate_stats.html">Calculate statistics</a></li>
    <li><a class="dropdown-item" href="../articles/visualization.html">Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/write_and_validate.html">Write and validate output</a></li>
    <li><a class="dropdown-item" href="../articles/lookupfunctions.html">Lookup functions/definitions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../contact.html">Contact</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/IEA-EBC-Annex86/annex/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/IEA-EBC-Annex86/annex/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-14" id="annex-02-14">annex 0.2-14<a class="anchor" aria-label="anchor" href="#annex-02-14"></a></h2>
<ul><li>No changes to the core of the package; implemented proper GitHub actions, added development functions (not exported; TBD).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-13" id="annex-02-13">annex 0.2-13<a class="anchor" aria-label="anchor" href="#annex-02-13"></a></h2>
<ul><li>
<code><a href="../reference/annex_validate.html">annex_validate()</a></code> will no longer throw an error for variables which have no lower/upper bound set (<code>Other</code> and <code>PMOther</code>)</li>
<li>The XLSX template now has a dropdown (pre-defined set of values; data range) for sheet META-Home column ‘Type of building’. Not mandatory, no special check by <code><a href="../reference/annex_validate.html">annex_validate()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-12" id="annex-02-12">annex 0.2-12<a class="anchor" aria-label="anchor" href="#annex-02-12"></a></h2>
<ul><li>
<code><a href="../reference/annex_stats.html">annex_stats()</a></code> now also includes annual statistics for the whole day (<code>tod = "all"</code>).</li>
<li>
<code><a href="../reference/annex_stats.html">annex_stats()</a></code> also includes overall stats (over the entire data set, all years, all <code>tod</code>). If data is only available within one specific year, this will be identical to the annual <code>tod = "all"</code> stats (duplicated data but added for convenience).</li>
<li>Adjusted tinytests for new behaviour (extended stats).</li>
<li>
<code><a href="../reference/annex_validate.html">annex_validate()</a></code> gives more details when quality violations (boundary violations) are found; now shows <code>user-study-home-room-year-month-tod</code> in addition to the XLSX row number for easier interpretability.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-11" id="annex-02-11">annex 0.2-11<a class="anchor" aria-label="anchor" href="#annex-02-11"></a></h2>
<ul><li>Added experimental function for plotting objects of class <code>annex_stats</code> as returned by <code><a href="../reference/annex_stats.html">annex_stats()</a></code>.</li>
<li>Issue fixed; <code><a href="../reference/annex.html">annex()</a></code> now appends the user defined time zone to <code>datetime</code> which is later used in <code><a href="../reference/annex_stats.html">annex_stats()</a></code>. Before the fix the <code>tod</code> was correct, however, the <code>quality_from</code>/<code>quality_to</code> was incorrect.</li>
<li>Note: The version used to process user 008.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-10" id="annex-02-10">annex 0.2-10<a class="anchor" aria-label="anchor" href="#annex-02-10"></a></h2>
<ul><li>Fixing a bug; <code>interval_*</code> and <code>Nestim</code> now properly set to <code>NA</code> (missing) if <code>N - NAs &lt;= 1</code>.</li>
<li>Added new comment column to template sheet META-Home (non-mandatory field)</li>
<li>
<code>write_annex_stats()</code> adds the package version used to process the data as well as the <em>R</em> version string to the INFO sheet.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-9" id="annex-02-9">annex 0.2-9<a class="anchor" aria-label="anchor" href="#annex-02-9"></a></h2>
<ul><li>Added an additional check in <code><a href="../reference/annex_prepare.html">annex_prepare()</a></code> to ensure that all data columns are numeric. If one of the variables provided is not numeric but only contains missing values (e.g., logical NAs) the column is converted automatically (to <code>NA_real_</code>). Else (not numeric or not all missing) an error will be thrown.</li>
<li>New feature: <code><a href="../reference/annex.html">annex()</a></code> has a new argument <code>duplicate.action</code> which allows the user to specify how he would like to handle duplicated observations (observations for the same date and time for a specific room). See <code><a href="../reference/annex.html">?annex</a></code> section ‘Duplicates’ for details.</li>
<li>
<code>annex_validate(..., quiet = FALSE)</code> is now quiet.</li>
<li>Adding new function <code><a href="../reference/annex_read_stats.html">annex_read_stats()</a></code> which allows to import data from one or multiple XLSX files written by <code><a href="../reference/annex_write_stats.html">annex_write_stats()</a></code> (beta).</li>
<li>Removing ventilation type ‘Exhaust air’ added in 0.2-8</li>
<li>
<code><a href="../reference/annex_stats.html">annex_stats()</a></code> will return <code>NA</code>s for ‘Mean’ and ‘Sd’ in case the number of valid observations (<code>N - NAs</code>) are less than 30.</li>
<li>
<code><a href="../reference/annex_stats.html">annex_stats()</a></code> will return <code>NA</code>s for <code>interval_*</code> if <code>N - NAs == 1</code> (we have exactely one valid observation).</li>
<li>
<code><a href="../reference/annex_validate.html">annex_validate()</a></code> validates for the two conditions above.</li>
<li>
<code><a href="../reference/annex_validate.html">annex_validate()</a></code> now also throws an error if <code>Sd &lt; 0</code> (see condition above).</li>
<li>Series of additional tests added.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-8" id="annex-02-8">annex 0.2-8<a class="anchor" aria-label="anchor" href="#annex-02-8"></a></h2>
<ul><li>Added additional ventilation type in definitions (Exhaust air)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-7" id="annex-02-7">annex 0.2-7<a class="anchor" aria-label="anchor" href="#annex-02-7"></a></h2>
<ul><li>Fixed a <strong>serious issue</strong> with how the intervals (how often measurements are reported) which also affects the estimate of how many observations we estimate (we think should be there).</li>
<li>Added a new variable <code>Flow</code> (air flow) and it’s conversions; defaults to <code>l/s</code> (liters per second) allowing values (via annex config) for <code>m3/h</code> (quibic meters per hour) and <code>cfm</code> (suare feet per minute).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-6" id="annex-02-6">annex 0.2-6<a class="anchor" aria-label="anchor" href="#annex-02-6"></a></h2>
<ul><li>An issue with <a href="https://github.com/ycphs/openxlsx/pull/409#event-8839793513" class="external-link"><code>openxlsx</code></a> has been fixed, when using <code>openxlsx &gt;= 4.2.5.9001</code> annex shoul work as expected for those not using MS Excel.</li>
<li>In the mean time one small issue with <code>openxlsx</code> has been adressed (for those opening/modifying their <code>.xlsx</code> files with openoffice). See <a href="https://github.com/IEA-EBC-Annex86/annex/issues/9" class="external-link">issue 9</a> for details.</li>
<li>Modified the variable definition. Minor renaming, modified/added lower and upper bounds as well as allowed units. In addition …</li>
<li>… a series of unit conversion functions has been added.</li>
<li>Updated the vignettes (documentation) to the new code base.</li>
<li>Updated and extended the tinytests for the new release; mainly for unit conversions.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-4" id="annex-02-4">annex 0.2-4<a class="anchor" aria-label="anchor" href="#annex-02-4"></a></h2>
<p>Release candidate for testing in February 2023 with some major changes based on the discussions in the meeting early February.</p>
<ul><li>The config object now must contain a “unit” variable. Some of the allowed variables (see <code><a href="../reference/annex_variable_definition.html">annex_variable_definition()</a></code>) have a set of pre-defined units which must be used. <code><a href="../reference/annex_prepare.html">annex_prepare()</a></code> internally converts all the data to the ‘annex standard units’. E.g., the user can provide temperature data in Kelvin or Farenheit, <code><a href="../reference/annex_prepare.html">annex_prepare()</a></code> will always convert them to degrees Celsius. This is currently implemented for “T” (temperature; deg C), “RH” (relative humidity; percent) and “Pressure” (hPa).</li>
<li>Auto-fill “META-Variable” for those variables where the annex package enforces the unit (e.g., “T” always in degrees Celsius; “RH” always in percent).</li>
<li>Removed “META-Season” sheet from XLSX file.</li>
<li>Changed aggregation. Originally the aggregation has been done on a quarterly level including all years. The new version aggregates by year + month.</li>
<li>Allowing rooms to be numbered for differenciation by adding up to two digits. E.g. BED, BED1, BED2, BED66 (same for all room types).</li>
<li>New functions <code><a href="../reference/annex_variable_definition.html">annex_variable_definition()</a></code> and <code><a href="../reference/annex_room_definition.html">annex_room_definition()</a></code> which return information about allowed variables/room labels amongst other information.</li>
<li>Added data set containing all ISO3166 alpha-3 (ISO3) country codes used for validationn. Convenience function <code><a href="../reference/annex_countries.html">annex_countries()</a></code> which returns <code>data("ISO3166")</code>
</li>
<li>Added quality flag to stats; percentage of observations falling below a certain threshold or exceed a threshold. These bounds are defined in the “Definitions” sheet in the XLSX file and can be accessed calling <code><a href="../reference/annex_variable_definition.html">annex_variable_definition()</a></code>.</li>
<li>Additional output when validating the XLSX file; improved readability.</li>
<li>Added interval (measurement interval) information to stats; time in seconds to the previous observation recorded in the data set. Calculated on a varaible level; if no value is present (missing value) this will be considered to ‘not have been mesured’ which leads to longer interval times. Currently reporting five number summary plus</li>
<li>Both XLSX sheets ‘META-Room’ and ‘META-Variable’ have a column for optional information about the measurement location (e.g., next to window, center of room, and any other important/helpful information) or variable (optional meta data).</li>
<li>Additional tinytests for support functions.</li>
<li>Validation: Decent update on the validation to show more granular errors and warnings. Additional checks for specific varaibles to ensure the content follows the expected format. Added conditional tests on variables (some require additional information).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2-0" id="annex-02-0">annex 0.2-0<a class="anchor" aria-label="anchor" href="#annex-02-0"></a></h2>
<p>Under development since January 2, 2023; intended to be the next release after the initial testing phase December 2022 to February 2023.</p>
<ul><li>Renaming ‘Pollutant’ consistently to ‘Variable’ (issue <a href="https://github.com/IEA-EBC-Annex86/annex/issues/2" class="external-link">#2</a>)</li>
<li>Renaming sheet ‘Meta-Period’ to ‘Meta Season’ (issue <a href="https://github.com/IEA-EBC-Annex86/annex/issues/2" class="external-link">#2</a>)</li>
<li>Automatically filling ‘Measurement Location’ in META-Room (issue <a href="https://github.com/IEA-EBC-Annex86/annex/issues/3" class="external-link">#3</a>)</li>
<li>Automatically filling ‘Variable Name’ in META-Variable (issue <a href="https://github.com/IEA-EBC-Annex86/annex/issues/4" class="external-link">#4</a>)</li>
<li>Adjusting some (internal) function names (Pollutants -&gt; Variables; Period -&gt; Season) given the adjustments updates listed above.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1" id="annex-01">annex 0.1<a class="anchor" aria-label="anchor" href="#annex-01"></a></h2>
<p>Summary of major fixes and features during the development of the package in its <code>0.1-X</code> state.</p>
<ul><li>New infrastructure with custom S3 class with a series of handy methods</li>
<li>Introducing a <code>config</code> object for easy control</li>
<li>Moving project to <a href="https://github.com/IEA-EBC-Annex86/annex/" class="external-link uri">https://github.com/IEA-EBC-Annex86/annex/</a>
</li>
<li>Adding first version of <code><a href="../reference/annex_write_stats.html">annex_write_stats()</a></code>; no overwrite mode for now</li>
<li>Added method to reshape <code>annex_stats</code> objects from long to wirde form and vice versa</li>
<li>
<code>annex_write_stats</code> now accepts long and wide formats</li>
<li>Added logo (draft)</li>
<li>Added <code>annex_validate</code> to validate an XLSX output file; likely missing some checks.</li>
<li>Resolving a series of notes/warnings during build check</li>
<li>Properly adding licenses (GPL-2 + GPL-3)</li>
<li>Updating documentation and readme; adding process schematic.</li>
<li>Removing unused R scripts (version 0 of the annex package).</li>
<li>Removing rows in <code>STAT</code> when writing the file where N == NAs; no data available at all.</li>
<li>Rounding all stats to 4 digits max.</li>
<li>Adjusting documentation according to GR (<code>0.0-14</code>)</li>
<li>Added a list of contributors; added ORCID for GR.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0-9000" id="annex-00-9000">Annex 0.0-9000<a class="anchor" aria-label="anchor" href="#annex-00-9000"></a></h2>
<ul><li>Reto is just playing around.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Reto Stauffer, Gabriel Rojas-Kopeinig, Tobias Grass.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

